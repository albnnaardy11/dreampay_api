"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[588],{28453(e,n,i){i.d(n,{R:()=>o,x:()=>t});var a=i(96540);const s={},l=a.createContext(s);function o(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(l.Provider,{value:n},e.children)}},91989(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"deployment","title":"Backend Deployment Guide","description":"Prerequisites","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/dreampay-api/docs/deployment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/dreampay-api/docs/auth"},"next":{"title":"Introduction","permalink":"/dreampay-api/docs/intro"}}');var s=i(74848),l=i(28453);const o={},t="Backend Deployment Guide",r={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Initial Setup",id:"initial-setup",level:2},{value:"1. Clone Repository",id:"1-clone-repository",level:3},{value:"2. Install Dependencies",id:"2-install-dependencies",level:3},{value:"3. Environment Configuration",id:"3-environment-configuration",level:3},{value:"4. Database Migration",id:"4-database-migration",level:3},{value:"5. Permissions",id:"5-permissions",level:3},{value:"6. Optimize",id:"6-optimize",level:3},{value:"Automated Deployment",id:"automated-deployment",level:2},{value:"Nginx Configuration",id:"nginx-configuration",level:2},{value:"SSL with Let&#39;s Encrypt",id:"ssl-with-lets-encrypt",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Check Application Status",id:"check-application-status",level:3},{value:"View Logs",id:"view-logs",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Clear All Caches",id:"clear-all-caches",level:3},{value:"Permission Issues",id:"permission-issues",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"backend-deployment-guide",children:"Backend Deployment Guide"})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ubuntu 20.04+ / Debian 11+"}),"\n",(0,s.jsx)(n.li,{children:"PHP 8.1+"}),"\n",(0,s.jsx)(n.li,{children:"MySQL 8.0+ / PostgreSQL 13+"}),"\n",(0,s.jsx)(n.li,{children:"Composer"}),"\n",(0,s.jsx)(n.li,{children:"Git"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"initial-setup",children:"Initial Setup"}),"\n",(0,s.jsx)(n.h3,{id:"1-clone-repository",children:"1. Clone Repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/your-username/dreampay_api.git\ncd dreampay_api\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-install-dependencies",children:"2. Install Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer install --no-dev --optimize-autoloader\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-environment-configuration",children:"3. Environment Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\nphp artisan key:generate\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"APP_ENV=production\nAPP_DEBUG=false\nAPP_URL=https://api.yourdomain.com\n\nDB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=dreampay\nDB_USERNAME=your_db_user\nDB_PASSWORD=your_secure_password\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-database-migration",children:"4. Database Migration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan migrate --force\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-permissions",children:"5. Permissions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chown -R www-data:www-data storage bootstrap/cache\nchmod -R 775 storage bootstrap/cache\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-optimize",children:"6. Optimize"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan config:cache\nphp artisan route:cache\nphp artisan view:cache\n"})}),"\n",(0,s.jsx)(n.h2,{id:"automated-deployment",children:"Automated Deployment"}),"\n",(0,s.jsxs)(n.p,{children:["Use the provided ",(0,s.jsx)(n.code,{children:"deploy.sh"})," script:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod +x deploy.sh\n./deploy.sh\n"})}),"\n",(0,s.jsx)(n.h2,{id:"nginx-configuration",children:"Nginx Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",children:'server {\n    listen 80;\n    server_name api.yourdomain.com;\n    root /var/www/dreampay_api/public;\n\n    add_header X-Frame-Options "SAMEORIGIN";\n    add_header X-Content-Type-Options "nosniff";\n\n    index index.php;\n\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    error_page 404 /index.php;\n\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"ssl-with-lets-encrypt",children:"SSL with Let's Encrypt"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install certbot python3-certbot-nginx\nsudo certbot --nginx -d api.yourdomain.com\n"})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"check-application-status",children:"Check Application Status"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan about\n"})}),"\n",(0,s.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"tail -f storage/logs/laravel.log\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"clear-all-caches",children:"Clear All Caches"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan cache:clear\nphp artisan config:clear\nphp artisan route:clear\nphp artisan view:clear\n"})}),"\n",(0,s.jsx)(n.h3,{id:"permission-issues",children:"Permission Issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo chown -R www-data:www-data storage bootstrap/cache\nsudo chmod -R 775 storage bootstrap/cache\n"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);